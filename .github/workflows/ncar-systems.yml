name: NCAR Systems Build and Test CUDA Hello World
run-name: ${{ github.actor }} compiling and running CUDA hello world example
on:
  pull_request:
    types:
      - labeled

jobs:

  casper-workflow:

    runs-on: basic-runner
    strategy:
      matrix:
        label: [casper, casper-a100, casper-v100]

    if: |
      github.repository == neumanbrett/cuda_ghactions_basic &&
      github.event.label.name == matrix.label

    name: Running on Casper
    uses: ./.github/workflows/casper.yml

  derecho-workflow:

    runs-on: basic-runner
    strategy:
      matrix:
        label: [derecho]

    if: |
      github.repository == neumanbrett/cuda_ghactions_basic &&
      github.event.label.name == matrix.label

    name: Running on Derecho
    uses: ./.github/workflows/derecho.yml
